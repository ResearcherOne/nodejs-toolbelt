<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!-- CDN for MQTT.js -->
    <script src="./paho-mqtt.js" type="text/javascript"></script>
</head>

<body>
        <script type="text/javascript">
            const config = {
                HOST: '',
                PORT: 0,
                USERNAME: "",
                PASSWORD: ""
            };

            // Create a client instance
            client = new Paho.MQTT.Client(config.HOST, config.PORT,"client_id");
            //Example client = new Paho.MQTT.Client("m11.cloudmqtt.com", 32903, "web_" + parseInt(Math.random() * 100, 10));
          
            // set callback handlers
            client.onConnectionLost = onConnectionLost;
            client.onMessageArrived = onMessageArrived;
            var options = {
              useSSL: true,
              userName: config.USERNAME,
              password: config.PASSWORD,
              onSuccess:onConnect,
              onFailure:doFail
            }
          
            // connect the client
            client.connect(options);
          
            // called when the client connects
            function onConnect() {
              // Once a connection has been made, make a subscription and send a message.
              console.log("onConnect");
              client.subscribe("/cloudmqtt");
              message = new Paho.MQTT.Message("Hello CloudMQTT");
              message.destinationName = "/cloudmqtt";
              client.send(message);
            }
          
            function doFail(e){
              console.log(e);
            }
          
            // called when the client loses its connection
            function onConnectionLost(responseObject) {
              if (responseObject.errorCode !== 0) {
                console.log("onConnectionLost:"+responseObject.errorMessage);
              }
            }
          
            // called when a message arrives
            function onMessageArrived(message) {
              console.log("onMessageArrived:"+message.payloadString);
            }
          </script>
    <h1>Hello world</h1>
</body>

</html>